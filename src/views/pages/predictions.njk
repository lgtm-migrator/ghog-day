{% extends "layout.njk" %}

{% block body_classes -%}
  predictions
{%- endblock %}

{% block content %}
  {% set h1 = [year, ' predictions'] | join %}
  {% set dataUrl = ['/api/v1/predictions/?year=', year] | join %}
  {{ page_header({ h1: h1, backUrl: '/', backText: 'Home', dataUrl: dataUrl }) }}

  <div class="predictions--summary">
    <ul>
      <li>
        <div class="predictions--summary--item predictions--summary--spring">
          <div class="icon"><span aria-hidden="true">üåº</span></div>
          <strong class="h1">{{ predictionTotals.spring }}</strong> predicted <span class="predictions--summary--highlight">early spring</span>
        </div>
      </li><!--
      --><li>
        <div class="predictions--summary--item predictions--summary--winter">
          <div class="icon"><span aria-hidden="true">‚ùÑÔ∏è</span></div>
          <strong class="h1">{{ predictionTotals.winter }}</strong> predicted <span class="predictions--summary--highlight">longer winter</span>
        </div>
      </li>
    </ul>
  </div>
  <div class="predictions">
    <h2 class="h5">5 predictions in 2022</h3>
    <div class="predictions--grid">
      {% for prediction in predictions %}
        <a href="/groundhogs/{{ prediction.groundhog.id }}">
          <div class="predictions--card predictions--card--{{ 'winter' if prediction.shadow else 'spring' }}">
              <span class="predictions--card--triangle"></span>
              <div class="predictions--card--heading h4">{{ prediction.groundhog.name }}</div>
              <div class="predictions--card--location">{{ prediction.groundhog.region }}, {{ prediction.groundhog.country }}</div>
              <div class="predictions--card--prediction">
                {% if prediction.shadow %}
                  <div class="icon"><span aria-hidden="true">‚ùÑÔ∏è</span></div>
                  <div>Longer winter</div>
                {% else %}
                  <div class="icon"><span aria-hidden="true">üåº</span></div>
                  <div>Early spring</div>
                {% endif %}
              </div>
          </div>
        </a>
      {% endfor %}
    </div>
  </div>
{% endblock %}
