{% extends "layout.njk" %}

{% block body_classes -%}
  index
{%- endblock %}

{% block content %}
  <h1>Only {{ daysLeft }} days until Groundhog Day 2023.</h1>

  <br />

  <div class="heading-with-right-link">
    <h2 class="heading h3">Predictions by year</h2>
    <div class="right-link"><a href="/predictions" class="link--icon link--icon--right underline">
      <span>All years</span> {{ icon({ right: true }) }}</a>
    </div>
  </div>
  <p>The prognostication given by the majority of groundhogs.</p>
  <div class="card--grid">
    {% for result in predictionResults %}
      <a href="/predictions/{{ result.year }}">
        <div class="card card--{{ result.prediction }}">
          <span class="card--triangle"></span>
          <div class="card--heading h2">{{ result.year }}</div>
          {% if result.prediction == 'winter' %}
            <div class="card--subhead"><span aria-hidden="true">‚ùÑÔ∏è</span> Longer winter</div>
            <div class="card--details card--bg-change">{{ result.groundhogs[result.prediction] }} groundhogs saw their shadows</div>
          {% else %}
            <div class="card--subhead"><span aria-hidden="true">üåº</span> Early spring</div>
            <div class="card--details card--bg-change">{{ result.groundhogs[result.prediction] }} groundhogs did not see their shadow</div>
          {% endif %}
        </div>
      </a>
    {% endfor %}
  </div>

  <br />
  <div class="heading-with-right-link">
    <h2 class="heading h3">Featured groundhogs</h2>
    <div class="right-link"><a href="/groundhogs" class="link--icon underline">
      <span>All groundhogs</span> {{ icon({ right: true }) }}</a>
    </div>
  </div>
  <p>This is a ‚Äòbox-of-chocolates‚Äô random selection out of <strong>{{ totalGroundhogs }}</strong> total groundhogs.</p>

  <div class="card--grid">
    {% for groundhog in randomGroundhogs %}
      <a href="/groundhogs/{{ groundhog.slug }}">
        {% set class = 'card--winter' if groundhog.shadow else 'card--spring' %}
        {% set latestPrediction = 'longer winter' if groundhog.shadow else 'early spring' %}
        <div class="card {{ class }}">
          <span class="card--triangle"></span>
          <div class="card--heading h5">{{ groundhog.name }}</div>
          <div class="card--subhead">{{ groundhog.location }}</div>
          <div class="card--details card--bg-change">Latest prediction: {{ latestPrediction }}</div>
        </div>
      </a>
    {% endfor %}
  </div>
  <div style="margin-top: 20px;">
    <a class="link--icon underline" href="#">
      {{ icon({ add: true }) }} <span>Add a groundhog</span>
    </a>
  </div>

  <br />

  <h2 class="h4">What is this site?</h2>
  <div class="max-width--850">
    <p class="mb--0">{{ site_title({ url: true }) }} combines the ancient wisdom of <a href="/groundhogs" class="underline">groundhogs</a> with the entrepreneurial dynamism of <a href="/api" class="underline">structured data</a>. Use it for your PhD thesis or instead of your unreliable weather app.</p>
  </div>

{% endblock %}
